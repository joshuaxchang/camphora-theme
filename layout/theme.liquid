<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ page_title }}</title>

    {{ content_for_header }}

    {{ 'application.min.css' | asset_url | stylesheet_tag }}
</head>
<body class="font-sans antialiased text-gray-800 bg-brand-bg">
    {% section 'header' %}

    <main>
        {{ content_for_layout }}
    </main>

    {% comment %} We will add the footer later {% endcomment %}
    {% render 'cart-drawer' %}
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // --- Cart Drawer Code ---
        const cartDrawer = document.getElementById('cart-drawer');
        const openCartButton = document.getElementById('open-cart-button');
        const closeCartButton = document.getElementById('close-cart-drawer');

        function openDrawer() {
          cartDrawer.classList.remove('translate-x-full');
        }

        function closeDrawer() {
          cartDrawer.classList.add('translate-x-full');
        }

        if (openCartButton) {
          openCartButton.addEventListener('click', function(event) {
            event.preventDefault();
            openDrawer();
          });
        }

        if (closeCartButton) {
          closeCartButton.addEventListener('click', closeDrawer);
        }

        // --- Hamburger Menu Code (pasted from header) ---
        const hamburgerButton = document.getElementById('hamburger-button');
        const mobileMenu = document.getElementById('mobile-menu');

        if (hamburgerButton && mobileMenu) { // Good practice to check if elements exist
          hamburgerButton.addEventListener('click', (e) => {
            e.stopPropagation();
            mobileMenu.classList.toggle('hidden');
          });

          document.addEventListener('click', (e) => {
            if (!mobileMenu.contains(e.target) && !hamburgerButton.contains(e.target)) {
              mobileMenu.classList.add('hidden');
            }
          });

          mobileMenu.addEventListener('click', (e) => {
            if (e.target.tagName === 'A') {
              mobileMenu.classList.add('hidden');
            }
          });
        }
      });
    </script>
</body>
</html>